{% extends "base_generic.html" %}
{% load static %}

{% block content %}
<link href="{% static 'css/stars.css' %}" rel="stylesheet">
<div style="display: flex;">
  <!-- First colum -->
  <div class="sidebar">
    <div class="column-left">
      <!-- Photo -->
      <div class="text-center">
        {% if author.photo %}
          <img src="{{ author.photo.url }}"
          alt="{{ author.photo }}"
          class="img-fluid border rounded shadow"
          style="max-width: 100%; height: auto; margin: auto; display: block;">
        {% else %}
        <img src="{% static 'images/portada_provisional.png' %}"
        alt="{% static 'images/portada_provisional.png' %}"
        class="img-fluid border rounded shadow"
        style="max-width: 100%; height: auto; margin: auto; display: block;">
        {% endif %}
        <!-- Rating -->
        {% if average_rating %}
        <div style="display: flex; align-items: center; justify-content: center;">
          <div class="rating" title="{{ average_rating }}" style="justify-content: left;">
            <div class="stars-outer">
              <div class="stars-inner" style="width: {{ average_rating_over_100 }}%;"></div>
            </div>
          </div>
          <span class="rating-text">{{ average_rating|floatformat:1 }}</span>
          <div class="ml-3 metric-item">
            <span>{{ total_ratings }} ratings</span>
            <br>
            <span>{{ total_reviews }} reviews</span>
          </div>
        </div>
        {% endif %}

        <div class="mt-3">
          {% if perms.book_catalog.change_author %}
          <a href="{% url 'author-update' author.id %}" class="btn btn-outline-dark mr-2"><i class="fas fa-edit fa-lg"></i></a>
          {% endif %}
          {% if perms.book_catalog.delete_author %}
          <a href="{% url 'author-delete' author.id %}" class="btn btn-outline-dark"><i class="fas fa-trash fa-lg"></i></a>
        {% endif %}
        </div>
      </div>
    </div>
  </div>
    <!-- Second column -->
    <div class="column-right">
      {% include "book_catalog/author_detail_content.html" %}
    </div>
</div>
{% endblock %}
